---
import { CircleCheck, CircleX, Send } from "@lucide/astro"

import ContactInfoCard from "@/components/molecules/ContactInfoCard/index.astro"
import { useTranslation } from "@/i18n"

import { CONTACT_INFO } from "./constants"

const currentLang = Astro.params.lang || "es"
const t = useTranslation(currentLang as "es" | "en")
---

<section id="contact" class="py-20 bg-neutral-900">
	<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
		<div class="text-center mb-16">
			<h2 class="text-3xl sm:text-4xl font-bold text-white mb-4">{t.contact.title}</h2>
			<div class="w-24 h-1 bg-blue-600 mx-auto rounded-full mb-6"></div>
			<p class="text-lg text-gray-300 max-w-2xl mx-auto">
				{t.contact.description}
			</p>
		</div>

		<div class="grid lg:grid-cols-2 gap-12">
			{/* Contact Information */}
			<div class="space-y-8">
				<div>
					<h3 class="text-2xl font-bold text-white mb-6">{t.contact.info.title}</h3>
					<p class="text-gray-300 mb-8 leading-relaxed">
						{t.contact.info.description}
					</p>
				</div>

				<div class="space-y-6">
					{
						CONTACT_INFO.map(item => {
							return (
								<ContactInfoCard
									icon={item.icon}
									title={t.contact.info[item.key as keyof typeof t.contact.info]}
									details={item.details}
								/>
							)
						})
					}
				</div>
			</div>

			{/* Contact Form */}
			<div class="bg-neutral-800 rounded-2xl shadow-lg p-8">
				<h3 class="text-2xl font-bold text-white mb-6">{t.contact.form.title}</h3>

				<div
					class="mb-6 p-4 bg-green-900 border border-green-700 rounded-lg items-center hidden"
					id="success-message"
				>
					<CircleCheck class="h-5 w-5 text-green-400 mr-3" />
					<p class="text-green-200">
						{t.contact.form.successMessage}
					</p>
				</div>

				<div
					class="mb-6 p-4 bg-red-900 border border-red-700 rounded-lg items-center hidden"
					id="error-message"
				>
					<CircleX class="h-5 w-5 text-red-400 mr-3" />
					<p class="text-red-200">
						{t.contact.form.errorMessage}
					</p>
				</div>

				<form
					class="space-y-6"
					id="contact-form"
					action={`https://formspree.io/f/${import.meta.env.FORMSPREE_ID}`}
					method="post"
				>
					<div class="grid md:grid-cols-2 gap-6">
						<div>
							<label for="name" class="block text-sm font-medium text-gray-300 mb-2">
								{t.contact.form.name} *
							</label>
							<input
								type="text"
								id="name"
								name="name"
								required
								class="w-full px-4 py-3 bg-neutral-700 border border-gray-600 text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
								placeholder={t.contact.form.placeholders.name}
							/>
						</div>
						<div>
							<label for="email" class="block text-sm font-medium text-gray-300 mb-2">
								{t.contact.form.email} *
							</label>
							<input
								type="email"
								id="email"
								name="email"
								required
								class="w-full px-4 py-3 bg-neutral-700 border border-gray-600 text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
								placeholder={t.contact.form.placeholders.email}
							/>
						</div>
					</div>

					<div>
						<label for="subject" class="block text-sm font-medium text-gray-300 mb-2">
							{t.contact.form.subject} *
						</label>
						<input
							type="text"
							id="subject"
							name="subject"
							required
							class="w-full px-4 py-3 bg-neutral-700 border border-gray-600 text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
							placeholder={t.contact.form.placeholders.subject}
						/>
					</div>

					<div>
						<label for="message" class="block text-sm font-medium text-gray-300 mb-2">
							{t.contact.form.message} *
						</label>
						<textarea
							id="message"
							name="message"
							required
							rows={5}
							class="w-full px-4 py-3 bg-neutral-700 border border-gray-600 text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none"
							placeholder={t.contact.form.placeholders.message}></textarea>
					</div>

					<button
						type="submit"
						class="w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-semibold py-4 px-6 rounded-lg transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center"
					>
						<div id="loading-button-content" class="items-center justify-center hidden">
							<div
								class="animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"
							>
							</div>
							{t.contact.form.sending}...
						</div>
						<div id="send-button-content" class="flex items-center justify-center">
							<Send class="mr-2 h-5 w-5" />
							{t.contact.form.send}
						</div>
					</button>
				</form>
			</div>
		</div>
	</div>
</section>

<script src="./scripts.ts"></script>
