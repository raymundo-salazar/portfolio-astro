---
import Layout from "@/layouts/index.astro"
import HeroSkeleton from "@/sections/HeroSkeleton/index.astro"
import HeaderSkeleton from "@/sections/HeaderSkeleton/index.astro"

import "@/styles/global.css"

export function getStaticPaths() {
	return [{ params: { lang: "es" } }, { params: { lang: "en" } }]
}

export const defaultRedirect = "/es"
---

<Layout>
	<HeaderSkeleton />
	<HeroSkeleton />
</Layout>
<script is:inline>
	;(function () {
		const browserLang = navigator.language || navigator.userLanguage
		let lang = browserLang.toLowerCase().startsWith("es") ? "es" : "en"

		const currentPath = window.location.pathname.split("/")[1]
		if (currentPath === "es" || currentPath === "en") return

		window.location.replace(`/${lang}`)
	})()
</script>
